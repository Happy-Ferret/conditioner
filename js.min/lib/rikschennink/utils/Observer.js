define([],function(){var t=1,e={};return{_setEntry:function(n,i){var o=n.__pubSubUID;return o||(o=t++,n.__pubSubUID=o,e[o]={obj:n}),e[o][i]||(e[o][i]=[]),e[o]},_getEntryProp:function(t,n){var i=e[t.__pubSubUID];return i?e[t.__pubSubUID][n]:null},subscribe:function(t,e,n){for(var i,o=this._setEntry(t,"subscriptions"),r=0,s=o.subscriptions,u=s.length;u>r;r++)if(i=s[r],i.type===e&&i.fn===n)return;s.push({type:e,fn:n})},unsubscribe:function(t,e,n){var i=this._getEntryProp(t,"subscriptions");if(i)for(var o,r=i.length;--r>=0;)o=i[r],o.type!==e||o.fn!==n&&n||i.splice(r,1)},publishAsync:function(t,e,n){var i=this;setTimeout(function(){i.publish(t,e,n)},0)},publish:function(t,e,n){for(var i,o=this._setEntry(t,"subscriptions"),r=[],s=0,u=o.subscriptions,l=u.length,a=o.receivers;l>s;s++)i=u[s],i.type===e&&r.push(i);for(l=r.length,s=0;l>s;s++)r[s].fn(n);if(a)for(l=a.length,s=0;l>s;s++)this.publish(a[s],e,n)},inform:function(t,e){if(!t||!e)return!1;var n=this._setEntry(t,"receivers");return n.receivers.push(e),!0},conceal:function(t,e){if(!t||!e)return!1;var n=this._getEntryProp(t,"receivers");if(!n)return!1;for(var i,o=n.length;--o>=0;)if(i=n[o],i===e)return n.splice(o,1),!0;return!1}}});