define("conditioner/Observer",[],function(){var e=1,t={};return{_setEntry:function(n,i){var r=n.__pubSubUID;return r||(r=e++,n.__pubSubUID=r,t[r]={obj:n}),t[r][i]||(t[r][i]=[]),t[r]},_getEntryProp:function(e,n){var i=t[e.__pubSubUID];return i?t[e.__pubSubUID][n]:null},subscribe:function(e,t,n){for(var i,r=this._setEntry(e,"subscriptions"),o=0,s=r.subscriptions,u=s.length;u>o;o++)if(i=s[o],i.type===t&&i.fn===n)return;s.push({type:t,fn:n})},unsubscribe:function(e,t,n){var i=this._getEntryProp(e,"subscriptions");if(i)for(var r,o=i.length;--o>=0;)r=i[o],r.type!==t||r.fn!==n&&n||i.splice(o,1)},publishAsync:function(e,t,n){var i=this;setTimeout(function(){i.publish(e,t,n)},0)},publish:function(e,t,n){for(var i,r=this._setEntry(e,"subscriptions"),o=[],s=0,u=r.subscriptions,a=u.length,l=r.receivers;a>s;s++)i=u[s],i.type===t&&o.push(i);for(a=o.length,s=0;a>s;s++)o[s].fn(n);if(l)for(a=l.length,s=0;a>s;s++)this.publish(l[s],t,n)},inform:function(e,t){if(!e||!t)return!1;var n=this._setEntry(e,"receivers");return n.receivers.push(t),!0},conceal:function(e,t){if(!e||!t)return!1;var n=this._getEntryProp(e,"receivers");if(!n)return!1;for(var i,r=n.length;--r>=0;)if(i=n[r],i===t)return n.splice(r,1),!0;return!1}}}),define("conditioner/contains",[],function(){var e=document?document.body:null;return e&&e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:e&&e.contains?function(e,t){return e!=t&&e.contains(t)}:function(e,t){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1}}),define("conditioner/matchesSelector",[],function(){var e=null,t=document?document.body:null;return!t||t.matches?e="matches":t.webkitMatchesSelector?e="webkitMatchesSelector":t.mozMatchesSelector?e="mozMatchesSelector":t.msMatchesSelector?e="msMatchesSelector":t.oMatchesSelector&&(e="oMatchesSelector"),e?function(t,n){return t[e](n)}:function(e,t){for(var n=(e.parentNode||document).querySelectorAll(t)||[],i=n.length;i--;)if(n[i]==e)return!0;return!1}}),define("conditioner/mergeObjects",[],function(){var e=function(t,n){var i=Array.isArray(n),r=i&&[]||{};return n=n||{},i?r=n.concat():(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(n).forEach(function(i){r[i]="object"==typeof n[i]&&n[i]?t[i]?e(t[i],n[i]):n[i]:n[i]})),r};return e}),define(["require","conditioner/Observer","conditioner/contains","conditioner/matchesSelector","conditioner/mergeObjects"],function(e,t,n,i,r){var o=function(e,t){this._expression=e instanceof s||e instanceof o?e:null,this._config=this._expression?null:e,this._negate=void 0===t?!1:t};o.prototype.assignTester=function(e){this._expression=e},o.prototype.getConfig=function(){return this._config?[{expression:this,config:this._config}]:this._expression.getConfig()},o.prototype.succeeds=function(){return this._expression.succeeds?this._expression.succeeds()!==this._negate:!1},o.prototype.toString=function(){return(this._negate?"not ":"")+(this._expression?""+this._expression:this._config.path+":{"+this._config.value+"}")};var s=function(e,t,n){this._a=e,this._operator=t,this._b=n};s.prototype.succeeds=function(){return"and"===this._operator?this._a.succeeds()&&this._b.succeeds():this._a.succeeds()||this._b.succeeds()},s.prototype.toString=function(){return"("+(""+this._a)+" "+this._operator+" "+(""+this._b)+")"},s.prototype.getConfig=function(){return[this._a.getConfig(),this._b.getConfig()]};var u={getExpressionsCount:function(e){return e.match(/(:\{)/g).length},fromString:function(e){var t,n,i,r,u,a,l,h,c,d,p=0,f="",m=[],g="",_=!1,v=!1,b=null,y=null,x=[],M=e.length;for(b||(b=m);M>p;p++)if(u=e.charCodeAt(p),123!==u)if(125===u&&(t=b.length-1,n=t+1,_="not"===b[t],n=_?t:t+1,b[n]=new o({path:f,value:g},_),f="",g="",_=!1,v=!1),v)g+=e.charAt(p);else{if(40===u&&(b.push([]),x.push(b),b=b[b.length-1]),32===u||0===p||40===u){if(i=e.substr(p,5).match(/and |or |not /g),!i)continue;h=i[0],c=h.length-1,b.push(h.substring(0,c)),p+=c}if(41===u||p===M-1)do if(y=x.pop(),0!==b.length){for(r=0,d=b.length;d>r;r++)"string"==typeof b[r]&&("not"===b[r]?(b.splice(r,2,new o(b[r+1],!0)),r=-1,d=b.length):"not"!==b[r+1]&&(b.splice(r-1,3,new s(b[r-1],b[r],b[r+1])),r=-1,d=b.length));1===b.length&&y&&(y[y.length-1]=b[0],b=y)}else b=y;while(p===M-1&&y)}else for(v=!0,f="",a=p-2;a>=0&&(l=e.charCodeAt(a),32!==l&&40!==l);)f=e.charAt(a)+f,a--;return 1===m.length?m[0]:m}},a={_tests:{},_createTest:function(e,n){if(!n.assert)throw Error('TestRegister._addTest(path,config): "config.assert" is a required parameter.');var i=function(){};return i.supported="support"in n?n.support():!0,i._callbacks=[],i._ready=!1,i._setup=function(e){i.supported&&(i._callbacks.push(e.onchange.bind(e)),i._ready||(i._ready=!0,n.setup.call(i,i._measure)))},i._measure=function(e){var t="measure"in n?n.measure.call(i._measure,e):!0;if(t)for(var r=0,o=i._callbacks.length;o>r;r++)i._callbacks[r](e)},i.prototype.supported=function(){return i.supported},i.prototype.onchange=function(){t.publish(this,"change")},i.prototype.arrange=n.arrange?function(e,t){i.supported&&n.arrange.call(this,e,t)}:function(){i._setup(this)},n.measure&&(i.prototype.measure=n.measure),i.prototype.assert=n.assert,i},_findTest:function(e){return this._tests[e]},_storeTest:function(e,t){this._tests[e]=t},getTest:function(t,n){t="conditioner/tests/"+t,e([t],function(e){var i=a._findTest(t);i||(i=a._createTest(t,e),a._storeTest(t,i)),n(new i)})}},l=function(e,n,i){this._test=e,this._expected=n,this._element=i,this._result=!1,this._changed=!0;var r=this;t.subscribe(this._test,"change",function(){r._changed=!0}),this._test.arrange(this._expected,this._element)};l.prototype.succeeds=function(){return this._changed&&(this._changed=!1,this._result=this._test.assert(this._expected,this._element)),this._result};var h={_options:{},_redirects:{},registerModule:function(e,t,n){var i,r=requirejs.toUrl(e);this._options[r]=t,n&&(this._redirects[n]=e),i={},i[e]=t,requirejs.config({config:i})},getRedirect:function(e){return this._redirects[e]||e},getModule:function(e){if(!e)throw Error('ModuleRegistry.getModule(path): "path" is a required parameter.');return this._options[e]||this._options[requirejs.toUrl(e)]}},c=function(e,n,i,r){if(!e||!n)throw Error('ModuleController(path,element,agent,options): "path" and "element" are required parameters.');this._path=h.getRedirect(e),this._alias=e,this._element=n,this._options=i||{},this._agent=r||f,this._Module=null,this._module=null,this._agent.allowsActivation()?this._initialize():t.subscribe(this._agent,"ready",this._onAgentReady.bind(this))};c.prototype={getModulePath:function(){return this._path},isModuleActive:function(){return null!==this._module},wrapsModuleWithPath:function(e){return this._path===e||this._alias===e},_onAgentReady:function(){this._initialize()},_initialize:function(){t.subscribe(this._agent,"change",this._onAgentStateChange.bind(this)),t.publish(this,"init",this),this._agent.allowsActivation()&&this._onBecameAvailable()},_onBecameAvailable:function(){t.publish(this,"available",this),this._load()},_onAgentStateChange:function(){var e=this._agent.allowsActivation();this._module&&!e?this._unload():!this._module&&e&&this._onBecameAvailable()},_load:function(){if(this._Module)return this._onLoad(),void 0;var t=this;e([this._path],function(e){t._Module=e,t._onLoad()})},_parseOptionOverrides:function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){throw Error('ModuleController.load(): "options" is not a valid JSON string.')}return e},_parseOptions:function(e,t,n){var i,o,s=[],u={},a={};do i=h.getModule(e),s.push({page:i,module:t.options}),e=t.__superUrl;while(t=t.__super);for(o=s.length;o--;)u=r(u,s[o].page),a=r(a,s[o].module);return i=r(a,u),n&&(i=r(i,this._parseOptionOverrides(n))),i},_onLoad:function(){if(this._agent.allowsActivation()){var e=this._parseOptions(this._path,this._Module,this._options);if("function"==typeof this._Module?this._module=new this._Module(this._element,e):(this._module=this._Module.load?this._Module.load(this._element,e):null,void 0===this._module&&(this._module=this._Module)),!this._module)throw Error('ModuleController.load(): could not initialize module, missing constructor or "load" method.');t.inform(this._module,this),t.publish(this,"load",this)}},_unload:function(){return this._available=!1,this._module?(t.conceal(this._module,this),this._module.unload&&this._module.unload(),this._module=null,t.publish(this,"unload",this),!0):!1},destroy:function(){},execute:function(e,t){if(!this._module)return{status:404,response:null};var n=this._module[e];if(!n)throw Error('ModuleController.execute(method,params): function specified in "method" not found on module.');return t=t||[],{status:200,response:n.apply(this._module,t)}}};var d=function(e,t){if(!e)throw Error('NodeController(element): "element" is a required parameter.');this._element=e,this._element.setAttribute("data-processed","true"),this._priority=t?parseInt(t,10):0,this._moduleControllers=[],this._moduleLoadBind=this._onModuleLoad.bind(this),this._moduleUnloadBind=this._onModuleUnload.bind(this)};d.hasProcessed=function(e){return"true"===e.getAttribute("data-processed")},d.prototype={load:function(){if(!arguments||!arguments.length)throw Error("NodeController.load(controllers): Expects an array of module controllers as parameters.");this._moduleControllers=Array.prototype.slice.call(arguments,0);for(var e=0,n=this._moduleControllers.length;n>e;e++)t.subscribe(this._moduleControllers[e],"load",this._moduleLoadBind)},unload:function(){for(var e=0,t=this._moduleControllers.length;t>e;e++)this._unloadModuleController(this._moduleControllers[e]);this._moduleControllers=[],this._updateInitialized()},getPriority:function(){return this._priority},getElement:function(){return this._element},matchesSelector:function(e,t){return t&&!n(t,this._element)?!1:i(this._element,e,t)},areModulesActive:function(){return this.getActiveModuleControllers().length===this._moduleControllers.length},getActiveModuleControllers:function(){for(var e,t=0,n=this._moduleControllers.length,i=[];n>t;t++)e=this._moduleControllers[t],e.isModuleActive()&&i.push(e);return i},getModuleController:function(e){return this._getModuleControllers(e,!0)},getModuleControllers:function(e){return this._getModuleControllers(e)},_getModuleControllers:function(e,t){if(void 0===e)return t?this._moduleControllers[0]:this._moduleControllers.concat();for(var n,i=0,r=this._moduleControllers.length,o=[];r>i;i++)if(n=this._moduleControllers[i],n.matchesPath(e)){if(t)return n;o.push(n)}return t?null:o},execute:function(e,t){for(var n,i=0,r=this._moduleControllers.length,o=[];r>i;i++)n=this._moduleControllers[i],o.push({controller:n,result:n.execute(e,t)});return o},_onModuleLoad:function(e){t.unsubscribe(e,"load",this._moduleLoadBind),t.subscribe(e,"unload",this._moduleUnloadBind),t.inform(e,this),t.publish(this,"load",e),this._updateInitialized()},_onModuleUnload:function(e){t.subscribe(e,"load",this._moduleLoadBind),t.unsubscribe(e,"unload",this._moduleUnloadBind),t.conceal(e,this),this._updateInitialized()},_updateInitialized:function(){for(var e=0,t=this.getActiveModuleControllers(),n=t.length,i=[];n>e;e++)i.push(t[e].getModulePath());i.length?this._element.setAttribute("data-initialized",i.join(",")):this._element.removeAttribute("data-initialized")},_unloadModuleController:function(e){t.unsubscribe(e,"load",this._moduleLoadBind),t.unsubscribe(e,"unload",this._moduleUnloadBind),t.conceal(e,this),e.unload()}};var p=function(){if(!arguments||!arguments.length)throw Error("SyncedControllerGroup(controllers): Expects an array of node controllers as parameters.");this._inSync=!1,this._controllers=Array.prototype.slice.call(arguments,0),this._controllerLoadedBind=this._onLoad.bind(this),this._controllerUnloadedBind=this._onUnload.bind(this);for(var e,n=0,i=this._controllers.length;i>n;n++)e=this._controllers[n],t.subscribe(e,"load",this._controllerLoadedBind),t.subscribe(e,"unload",this._controllerUnloadedBind);this._test()};p.prototype={_onLoad:function(){this._test()},_onUnload:function(){this._unload()},_isActive:function(e){return e.isModuleActive&&e.isModuleActive()||e.areModulesActive&&!e.areModulesActive()},_test:function(){for(var e,t=0,n=this._controllers.length;n>t;t++)if(e=this._controllers[t],!this._isActive(e))return;this._load()},_load:function(){this._inSync||(this._inSync=!0,t.publishAsync(this,"load",this._controllers))},_unload:function(){this._inSync&&(this._inSync=!1,t.publish(this,"unload",this._controllers))}};var f={allowsActivation:function(){return!0}},m=function(e,t){"string"==typeof e&&e.length&&(this._suitable=!1,this._element=t,this._onResultsChangedBind=this._onTestResultsChanged.bind(this),this._count=u.getExpressionsCount(e),this._expression=u.fromString(e),this._loadExpressionTests(this._expression.getConfig()))};m.prototype={allowsActivation:function(){return this._suitable},_test:function(){var e=this._expression.succeeds();e!=this._suitable&&(this._suitable=e,t.publish(this,"change"))},_loadExpressionTests:function(e){for(var t=0,n=e.length;n>t;t++)Array.isArray(e[t])?this._loadExpressionTests(e[t]):this._loadTesterToExpression(e[t].config,e[t].expression)},_loadTesterToExpression:function(e,n){var i=this;a.getTest(e.path,function(r){n.assignTester(new l(r,e.value,i._element)),t.subscribe(r,"change",i._onResultsChangedBind),i._count--,0===i._count&&i._onReady()})},_onReady:function(){this._test(),t.publish(this,"ready")},_onTestResultsChanged:function(){this._test()}};var g=function(){this._options={modules:{}},this._nodes=[]};return g.prototype={init:function(e){e&&this.setOptions(e),this.parse(document)},setOptions:function(e){if(!e)throw Error('ModuleLoader.setOptions(options): "options" is a required parameter.');var t,n,i,o;this._options=r(this._options,e);for(n in this._options.modules)this._options.modules.hasOwnProperty(n)&&(i=this._options.modules[n],o="string"==typeof i?i:i.alias,t="string"==typeof i?null:i.options||{},h.registerModule(n,t,o))},parse:function(e){if(!e)throw Error('ModuleLoader.loadModules(context): "context" is a required parameter.');var t,n,i=e.querySelectorAll("[data-module]"),r=i.length,o=0,s=[];if(!i)return[];for(;r>o;o++)n=i[o],d.hasProcessed(n)||s.push(new d(n,n.getAttribute("data-priority")));for(s.sort(function(e,t){return e.getPriority()-t.getPriority()}),o=s.length;--o>=0;)t=s[o],t.load.apply(t,this._getModuleControllersByElement(t.getElement()));return this._nodes=this._nodes.concat(s),s},load:function(e,t){if(!t)return null;t=t.length?t:[t];var n,i,r=0,o=t.length,s=[];for(n=new d(e);o>r;r++)i=t[r],s.push(this._getModuleController(i.path,e,i.options,i.conditions));return n.load(s),this._nodes.push(n),n},sync:function(){var e=Object.create(p.prototype);return 1!=arguments.length||arguments.slice||(arguments=arguments[0]),p.apply(e,arguments),e},getNode:function(e,t){return this._getNodes(e,t,!0)},getNodes:function(e,t){return this._getNodes(e,t)},_getNodes:function(e,t,n){if(void 0===e&&void 0===t)return n?this._nodes[0]:this._nodes.concat();for(var i,r=0,o=this._nodes.length,s=[];o>r;r++)if(i=this._nodes[r],i.matchesSelector(e,t)){if(n)return i;s.push(i)}return n?null:s},_getModuleControllersByElement:function(e){var t,n,i,r=[],o=e.getAttribute("data-module")||"",s=0,u=91===o.charCodeAt(0);if(u){try{t=JSON.parse(o)}catch(a){throw Error('ModuleLoader.load(context): "data-module" attribute contains a malformed JSON string.')}if(!t)return[];for(i=t.length;i>s;s++)n=t[s],r.push(this._getModuleController(n.path,e,n.options,n.conditions))}else o.length&&r.push(this._getModuleController(o,e,e.getAttribute("data-options"),e.getAttribute("data-conditions")));return r},_getModuleController:function(e,t,n,i){return new c(e,t,n,i?new m(i,t):f)}},new g}),define("conditioner/extendClass",[],function(){return function(){var e,t,n=arguments[arguments.length-1],i=arguments[0];return"string"==typeof i?(e=requirejs,t=i,n.__superUrl=i):(e=i,t=arguments[1],n.__superUrl=e.toUrl(t)),n.__super=e(t),n.prototype=Object.create(n.__super.prototype),n}});