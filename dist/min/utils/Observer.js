!function(r){"use strict";var t=1,n={},e={_setEntry:function(r,e){var i=r.__pubSubUID;return i||(i=t++,r.__pubSubUID=i,n[i]={obj:r}),n[i][e]||(n[i][e]=[]),n[i]},_getEntryProp:function(r,t){var e=n[r.__pubSubUID];return e?n[r.__pubSubUID][t]:null},subscribe:function(r,t,n){for(var e,i=this._setEntry(r,"subscriptions"),u=0,s=i.subscriptions,o=s.length;o>u;u++)if(e=s[u],e.type===t&&e.fn===n)return;s.push({type:t,fn:n})},unsubscribe:function(r,t,n){var e=this._getEntryProp(r,"subscriptions");if(e)for(var i,u=e.length;--u>=0;)i=e[u],i.type!==t||i.fn!==n&&n||e.splice(u,1)},publishAsync:function(r,t,n){var e=this;setTimeout(function(){e.publish(r,t,n)},0)},publish:function(r,t,n){for(var e,i=this._setEntry(r,"subscriptions"),u=[],s=0,o=i.subscriptions,f=o.length,c=i.receivers;f>s;s++)e=o[s],e.type===t&&u.push(e);for(f=u.length,s=0;f>s;s++)u[s].fn(n);if(c)for(f=c.length,s=0;f>s;s++)this.publish(c[s],t,n)},inform:function(r,t){if(!r||!t)return!1;var n=this._setEntry(r,"receivers");return n.receivers.push(t),!0},conceal:function(r,t){if(!r||!t)return!1;var n=this._getEntryProp(r,"receivers");if(!n)return!1;for(var e,i=n.length;--i>=0;)if(e=n[i],e===t)return n.splice(i,1),!0;return!1}};"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):r.Observer=e}(this);